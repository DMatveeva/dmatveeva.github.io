---
layout: post
title: Как быстро работает компьютер
---

C какой скоростью работает компьютер? Примерные цифры - в таблице.

### Latency Comparison Numbers

| **Действие**                                              |             |    |         |    |     |    |                             |
|-----------------------------------------------------------|-------------| --- | ---    | --- | --- | --- |-----------------------------|
| L1 кэш - чтение                                           | 0.5         | ns |         |    |     |    |                             |
| Ошибочное предсказание ветви (*)                          | 3           | ns |         |    |     |    |                             |
| L2 кэш - чтение                                           | 4           | ns |         |    |     |    | 8x L1 cache                 |
| Захват/освобождение мьютекса                              | 17          | ns |         |    |     |    |                             |
| Оперативная память - чтение                               | 100         | ns |         |    |     |    | 25x L2 cache, 200x L1 cache |
| Передача 1Кбайт по сети с пропускной способностью 1 Gb    | 10,000      | ns | 10      | us |     |    |                             |
| Считать рандомно 4K с SSD                                 | 150,000     | ns | 150     | us |     |    | ~1GB/sec SSD                |
| Cчитать 1 MB последовательно из основной памяти           | 250,000     | ns | 250     | us |     |    |                             |
| Round trip в пределах одного датацентра (*)               | 300,000     | ns | 500     | us |     |    |                             |
| Считать последовательно 1 MB с SSD                        | 1,000,000   | ns | 1,000   | us | 1   | ms | ~1GB/sec SSD, 4X memory     |
| Считать из постоянной памяти (диска)                      | 10,000,000  | ns | 10,000  | us | 10  | ms | 20x datacenter roundtrip    |
| Считать 1 MB последовательно из постоянной памяти (диска) | 20,000,000  | ns | 20,000  | us | 20  | ms | 80x memory, 20X SSD         |
| Трансконтинентальная передача TCP-пакета US->Europe->US   | 150,000,000 | ns | 150,000 | us | 150 | ms |                             |

[https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6](https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6)

Ошибочное предсказание ветви (branch mispredict) — ситуация, когда процессор видит ветвление, и пытается
догадаться, каким путём пойдёт программа, но ошибается. Тогда ему требуется время на удаление инструкций ветви и
загрузку инструкций другой ветви.

Round trip в пределах одного датацентра - передача данных от одной машины к другой и обратно в пределах одного
датацентра.

Для сравнения:

| **Действие**                                              |     |     | 
|-----------------------------------------------------------|-----|-----|
| За какое время человеческий глаз воспринимает изображение | 13  | ms  |
| Моргание глазами                                          | 100 | ms  | 
| Время взаимодействия глаз - компьютерная мышь             | 200 | ms  |


Эти же цифры в виде диаграммы:

[https://colin-scott.github.io/personal_website/research/interactive_latency.html]([https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6](https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6)
)

Чтобы лучше воспринять масштаб, инфографика с аналогиями, понятными человеку, здесь:

[https://gist.github.com/hellerbarde/2843375?permalink_comment_id=1896153#gistcomment-1896153
]([https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6](https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6)
)
И в завершение, игра на понимание скорости исполнения кода:

[https://computers-are-fast.github.io/]([https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6](https://gist.github.com/GLMeece/b00c9c97a06a957af7426b1be5bc8be6)
)